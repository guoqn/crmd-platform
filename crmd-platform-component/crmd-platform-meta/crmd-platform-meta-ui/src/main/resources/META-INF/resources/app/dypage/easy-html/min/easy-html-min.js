///<jscompress sourcefile="eh-data.js" />
/**
 * 请求数据接口
 *
 * 获取统一请求接口
 *
 * @author LAIYONGMIN-PC
 */

// 获取统一请求接口
///<jscompress sourcefile="eh-parse.js" />
/**
 * JSON2HTML
 *
 * HMTL解析器
 *
 * @author LAIYONGMIN-PC
 */

// HMTL解析器
///<jscompress sourcefile="eh-script.js" />
/**
 * 脚本统一执行
 * 
 * @author LAIYONGMIN-PC
 */
// 脚本统一执行
///<jscompress sourcefile="eh-style.js" />
/**
 * JSON2STYLE
 *
 * 样式解析器
 *
 * @author LAIYONGMIN-PC
 */

// 样式解析器
///<jscompress sourcefile="eh-util.js" />
/**
 * 工具
 *
 * @author LAIYONGMIN-PC
 */if(!eh)var eh={};eh.data||(eh.data={});eh.data.url="meta/dynamicPageCtrl";eh.data.call=function(a,b,c){var d="";angular.injector(["commonApp","ng"]).invoke(["commonService",function(e){switch(a){case "win":d=eh.data.url+"/getDynamicWinByCode";break;case "tpl":d="";break;default:d=eh.data.url+"/"+b.method}e.call(d,b,function(a){$.isFunction(c)&&c(eh.data._dataformat(a))},null)}])};eh.data.callMethod=function(a,b,c){angular.injector(["commonApp","ng"]).invoke(["commonService",function(d){d.call(eh.data.url+"/"+a,b,function(a){$.isFunction(c)&&c(eh.data._dataformat(a))},null)}])};eh.data.callService=function(a,b,c){angular.injector(["commonApp","ng"]).invoke(["commonService",function(d){d.call(a,b,function(a){$.isFunction(c)&&c(eh.data._dataformat(a))},null)}])};eh.data.getPageByWinCode=function(a,b){eh.data.call("win",JSON.stringify({winCode:a}),b)};eh.data._dataformat=function(a){return a};$.fn.extend({win:function(a){var b=$(this);a&&eh.data.call("win",JSON.stringify({winCode:a.param}),function(c){try{b.html(eh.parse.createHtml(c)),eh.script.jsBatchActuator(eh.script.getDataCache("")),$.isFunction(a.success)&&a.success(c)}catch(d){$.isFunction(a.error)&&a.error(d)}})},winByEvent:function(a){var b=$(this);eh.data.callMethod("getDynamicWinByEvents",JSON.stringify({busSpec:a.param.busSpec,busService:a.param.busService,busRegion:a.param.busRegion,busType:a.param.busType,busObjId:a.param.busObjId,busChannel:a.param.busChannel}),function(c){try{b.html(eh.parse.createHtml(c)),eh.script.jsBatchActuator(eh.script.getDataCache("")),$.isFunction(a.success)&&a.success(c)}catch(d){$.isFunction(a.error)&&a.error(d)}})},initSelect:function(a){var b=$(this);eh.data.callService(a.url,a.param,function(c){if(c&&c.object){b.empty();var d=c.object;d&&0<d.length&&(b.append("\x3coption id\x3d'option_0_0' value\x3d''\x3e\u8bf7\u9009\u62e9\x3c/option\x3e"),$.each(d,function(a,c){b.append("\x3coption id\x3d'option_"+c.id+"' value\x3d'"+c.value+"'\x3e"+c.name+"\x3c/option\x3e")}));$.isFunction(a.success)&&a.success(c)}})},winByLocal:function(a){$(this).html(eh.parse.createHtml({object:{componentDto:a}}));eh.script.jsBatchActuator(eh.script.getDataCache(""))}});var ehDataServiceApp=angular.module("ehDataServiceApp",["commonApp"]);ehDataServiceApp.service("ehDataService",["commonService",function(a){this.saveEvent=function(a,c){eh.data.callMethod("insertDyEvent",a,c)};this.updateEvent=function(a,c){eh.data.callMethod("updateDyEvent",a,c)};this.deleteEvent=function(a,c){eh.data.callMethod("deleteDyEvent",{eventId:a},c)};this.getEventById=function(a,c){eh.data.callMethod("getDyEventByEventId",{eventId:a},c)};this.saveWindow=function(a,c){eh.data.callMethod("submitSimpleWindow",a,c)};this.updateWindow=function(a,c){eh.data.callMethod("submitSimpleWindow",a,c)};this.deleteWindow=function(a,c){eh.data.callMethod("deleteWindow",{winId:a},c)};this.getWindowById=function(a,c){eh.data.callMethod("getSimpleWindow",{winId:a},c)};this.getDesignWindow=function(a,c,d){eh.data.callMethod("getDynamicWinById",{objType:a,objId:c},d)};this.getTpl=function(a,c){eh.data.callMethod("getWindowByTplCode",{code:a},c)};this.saveDesignWindow=function(a,c,d,e,f){eh.data.callMethod("submitPageDesign",{children:d,delCompents:e,objType:a,objId:c},f)}}]);eh||(eh={});eh.parse||(eh.parse={});eh.parse.compType={};eh.parse.compType["1"]="input";eh.parse.compType["2"]="select";eh.parse.compType["5"]="dateinput";eh.parse.compType["8"]="checkbox";eh.parse.compType["9"]="radio";eh.parse.compType["10"]="textarea";eh.parse.compType["14"]="numberinput";eh.parse.compValue={};eh.parse.createHtml=function(a){return eh.parse.parse2HTML(eh.parse.getRootComp(a))};eh.parse.getRootComp=function(a){if(a&&a.object)return a.object.componentDto};eh.parse.parse2HTML=function(a){var b="";if(a)if(a.groupCode&&"201"!=a.componentType){if(a.tpl&&"undefined"!=typeof a.tpl){var c=a.tpl.componentDto;if(c&&c.children&&0<c.children.length){var d={};$.extend(d,c);c={};$.extend(c,a);delete c.tpl;delete c.groupCode;b+=eh.parse.createCompHtml(eh.parse.tplHtml(d,c))}else"200"===c.componentType&&eh.parse.tplStyle(c,a),b+=eh.parse.createCompHtml(a)}}else a.groupCode&&"201"===a.componentType?a.part&&"undefined"!=typeof a.part&&(b+=eh.parse.createCompHtml(a.part.componentDto)):b+=eh.parse.createCompHtml(a);return b};eh.parse.tplHtml=function(a,b){a.componentName=b.busAttrName?b.busAttrName:b.componentName;a.busAttrCode=b.busAttrCode?b.busAttrCode:b.componentCode;$.each(a.children,function(a,d){"200"===d.componentType?$.extend(!0,d,b):eh.parse.tplHtml(d,b);d.busAttrCode=b.busAttrCode?b.busAttrCode:b.componentCode;d.componentName=b.busAttrName?b.busAttrName:b.componentName});return a};eh.parse.tplStyle=function(a,b){$.each(a.dynamicStyleDtos,function(a,d){d.opType="tpl";b&&b.dynamicStyleDtos&&0<b.dynamicStyleDtos.length?$.each(b.dynamicStyleDtos,function(a,c){d.relaStyleId!=c.relaStyleId&&b.dynamicStyleDtos.push(d)}):("undefined"===typeof b.dynamicStyleDtos&&(b.dynamicStyleDtos=[]),b.dynamicStyleDtos.push(d))})};eh.parse.createCompHtml=function(a){var b="";switch(parseInt(a.componentType)){case 0:b=eh.parse.createForm(a);break;case 1:b=eh.parse.createInput(a);break;case 2:b=eh.parse.createSelect(a);break;case 3:b=eh.parse.createDiv(a);break;case 4:b=eh.parse.createLabel(a);break;case 5:b=eh.parse.createDateInput(a);break;case 6:b=eh.parse.createPassword(a);break;case 7:b=eh.parse.createSpan(a);break;case 8:b=eh.parse.createCheckbox(a);break;case 9:b=eh.parse.createRadiobox(a);break;case 10:b=eh.parse.createTextarea(a);break;case 11:b=eh.parse.createButton(a);break;case 12:b=eh.parse.createUl(a);break;case 13:b=eh.parse.createLi(a);break;case 14:b=eh.parse.createNumberInput(a)}return b};eh.parse.createStyle=function(a){a=eh.style.parseConfStyle(a.dynamicStyleDtos);return"undefined"==typeof a?"":a};eh.parse.createForm=function(a){var b="\x3cform "+eh.parse.createStyle(a)+" \x3e";a=a.children;if(null!=a&&0<a.length)for(t in a)b+=eh.parse.parse2HTML(a[t]);return b+"\x3c/form\x3e"};eh.parse.createDiv=function(a){var b="\x3cdiv "+eh.parse.createStyle(a)+" \x3e";a=a.children;if(null!=a&&0<a.length)for(t in a)b+=eh.parse.parse2HTML(a[t]);return b+"\x3c/div\x3e"};eh.parse.createTagId=function(a){return a.busAttrCode};eh.parse.createInput=function(a){var b="undefined"===typeof a.componentTip?"":a.componentTip;return a=""+("\x3cinput "+eh.parse.createStyle(a)+' id\x3d"'+eh.parse.createTagId(a)+'" type\x3d"text"  placeholder\x3d"'+b+'"/\x3e')};eh.parse.createLabel=function(a){var b;b=""+("\x3clabel "+eh.parse.createStyle(a)+' for\x3d"'+eh.parse.createTagId(a)+'"\x3e');var c=a.children;if(null!=c&&0<c.length){if(b+=""+a.componentName+":\x3c/label\x3e",c=a.children,null!=c&&0<c.length)for(t in c)b+=eh.parse.parse2HTML(c[t])}else b+=a.componentName+"\x3c/label\x3e";return b};eh.parse.createPassword=function(a){return a=""+("\x3cinput "+eh.parse.createStyle(a)+' id\x3d"'+eh.parse.createTagId(a)+'" type\x3d"password" "/\x3e')};eh.parse.createSpan=function(a){return a=""+("\x3cspan "+eh.parse.createStyle(a)+' id\x3d"'+eh.parse.createTagId(a)+'" \x3e'+a.componentName+"\x3c/span\x3e")};eh.parse.createCheckbox=function(a){return a=""+('\x3cinput type\x3d"checkbox" '+eh.parse.createStyle(a)+' id\x3d"'+eh.parse.createTagId(a)+'" value\x3d"1"\x3e  '+a.componentName+"")};eh.parse.createRadiobox=function(a){var b="",c=a.attrValueDtos;if(c&&0<c.length)for(var d=0;d<c.length;d++)var e=c[d],b=b+('\x3cinput name\x3d"'+a.busAttrCode+'" '+eh.parse.createStyle(a)+' id\x3d"'+eh.parse.createTagId(a)+'" value\x3d"'+e.attrValue+'"\x3e'+e.attrValueName+"\x3c/input\x3e");return b};eh.parse.createTextarea=function(a){return a=""+("\x3ctextarea "+eh.parse.createStyle(a)+' id\x3d"'+eh.parse.createTagId(a)+'" rows\x3d"'+a.componentRows+'" clos\x3d"'+a.componentClos+'" placeholder\x3d"'+a.componentName+'"/\x3e')};eh.parse.createSelect=function(a){var b;b=""+(" \x3cselect "+eh.parse.createStyle(a)+' id\x3d"'+eh.parse.createTagId(a)+'"\x3e');var c=a.attrValueDtos;if(c&&0<c.length){b+='\x3coption id\x3d"option_0_0" value\x3d"" selected\x3d"selected"\x3e\u8bf7\u9009\u62e9\x3c/option\x3e';for(var d=0;d<c.length;d++){var e=c[d];b+='\x3coption id\x3d"option_'+eh.parse.createTagId(a)+"_"+e.attrValueId+'" value\x3d"'+e.attrValue+'"\x3e'+e.attrValueName+"\x3c/option\x3e"}}return b+"\x3c/select\x3e"};eh.parse.createDateInput=function(a){var b="\x3cinput "+eh.parse.createStyle(a)+' id\x3d"'+eh.parse.createTagId(a)+'" placeholder\x3d"'+a.componentName+'" type\x3d"text" /\x3e';eh.script.setDataCache(eh.parse.createTagId(a),function(){$("#"+eh.parse.createTagId(a)).datetimepicker({format:"undefined"===typeof a.componentExp?"yyyy-MM-dd":a.componentExp,dateIcon:"glyphicon glyphicon-calendar"})});return b};eh.parse.createButton=function(a){return'\x3cbutton type\x3d"button" '+eh.parse.createStyle(a)+' id\x3d"'+eh.parse.createTagId(a)+'"\x3e'+a.componentName+"\x3c/button\x3e"};eh.parse.createUl=function(a){var b="\x3cul "+eh.parse.createStyle(a)+' id\x3d"'+eh.parse.createTagId(a)+'"\x3e';a=a.children;if(null!=a&&0<a.length)for(t in a)b+=eh.parse.parse2HTML(a[t]);return b+"\x3c/ul\x3e"};eh.parse.createLi=function(a){return"\x3cli "+eh.parse.createStyle(a)+' id\x3d"'+eh.parse.createTagId(a)+'"\x3e'+a.componentName+"\x3c/li\x3e"};eh.parse.createNumberInput=function(a){var b="undefined"===typeof a.componentTip?"":a.componentTip;return a=""+("\x3cinput "+eh.parse.createStyle(a)+' id\x3d"'+eh.parse.createTagId(a)+'" type\x3d"text" value\x3d"0"  placeholder\x3d"'+b+'" onblur\x3d"eh.util.isNumber(this,'+("undefined"===typeof a.componentExp?"''":""+a.componentExp+"")+')"/\x3e')};eh.parse.getHtmlValue=function(a){eh.parse.vResult=[];a=eh.parse.getRootComp(a);eh.parse.validate(a.children);if(eh.parse.vResult&&0<eh.parse.vResult.length)MESSAGE_DIALOG.warning("\u8bf7\u628a\u5fc5\u586b\u6570\u636e\u8865\u5145\u5b8c\u6574!");else return eh.parse.recursionGetComp(a.children)};eh.parse.recursionGetComp=function(a){for(var b in a){var c=a[b];c.componentType in eh.parse.compType&&(eh.parse.compValue[c.busAttrCode]=eh.parse.getCompValue(c));c=c.children;null!=c&&0<c.length&&eh.parse.recursionGetComp(c)}return eh.parse.compValue};eh.parse.vResult=[];eh.parse.getCompValue=function(a){var b=null;switch(parseInt(a.componentType)){case 1:b=eh.parse.getInputValue(a);break;case 2:b=eh.parse.getSelectValue(a);break;case 5:b=eh.parse.getDateInputValue(a);break;case 8:b=eh.parse.getCheckboxValue(a);break;case 9:b=eh.parse.getRadioValue(a);break;case 10:b=eh.parse.getTextareaValue(a);break;case 14:b=eh.parse.getNumberInputValue(a)}return b};eh.parse.validate=function(a){for(var b in a){var c=a[b];if(c.componentType in eh.parse.compType){var d=eh.parse.getCompValue(c);c.attrSpecDto&&"0"===c.attrSpecDto.isNullable&&(ffc.util.isEmpty(d)||"-1"===d)?(eh.parse.vResult.push(!1),$("#"+eh.parse.createTagId(c)).addClass("error")):$("#"+eh.parse.createTagId(c)).removeClass("error")}c=c.children;null!=c&&0<c.length&&eh.parse.validate(c)}};eh.parse.getInputValue=function(a){return $("#"+eh.parse.createTagId(a)).val()};eh.parse.getSelectValue=function(a){return $("#"+eh.parse.createTagId(a)).val()};eh.parse.getDateInputValue=function(a){return $("#"+eh.parse.createTagId(a)).val()};eh.parse.getRadioValue=function(a){return $('input:radio[name\x3d"'+a.busAttrCode+'"]:checked').val()};eh.parse.getCheckboxValue=function(a){$("input[id\x3d'"+a.busAttrCode+"']:checkbox").each(function(){if($(this).attr("checked"))return!0});return!1};eh.parse.getTextareaValue=function(a){return $("#"+eh.parse.createTagId(a)).val()};eh.parse.getNumberInputValue=function(a){return $("#"+eh.parse.createTagId(a)).val()};eh.parse.setHtmlValue=function(a,b){var c=eh.parse.getRootComp(a);return eh.parse.recursionSetComp(c.children,b)};eh.parse.clearHtmlValue=function(a){a=eh.parse.getRootComp(a);return eh.parse.recursionClearComp(a.children)};eh.parse.recursionClearComp=function(a){for(i in a){var b=a[i];b.componentType in eh.parse.compType&&eh.parse.setCompValue(b,"");b=b.children;null!=b&&0<b.length&&eh.parse.recursionClearComp(b)}};eh.parse.recursionSetComp=function(a,b){for(i in a){var c=a[i];if(c.componentType in eh.parse.compType&&b)for(key in b)c.busAttrCode===key&&eh.parse.setCompValue(c,"undefiend"===typeof b[key]?"":b[key]);c=c.children;null!=c&&0<c.length&&eh.parse.recursionSetComp(c,b)}};eh.parse.setCompValue=function(a,b){switch(parseInt(a.componentType)){case 1:eh.parse.setInputValue(a,b);break;case 2:eh.parse.setSelectValue(a,b);break;case 5:eh.parse.setDateInputValue(a,b);break;case 8:eh.parse.setCheckboxValue(a,b);break;case 9:eh.parse.setRadioValue(a,b);break;case 10:eh.parse.setTextareaValue(a,b);break;case 14:eh.parse.setNumberInputValue(a,b)}};eh.parse.setInputValue=function(a,b){$("#"+eh.parse.createTagId(a)).val(b)};eh.parse.setSelectValue=function(a,b){$("#"+eh.parse.createTagId(a)).val(b)};eh.parse.setDateInputValue=function(a,b){$("#"+eh.parse.createTagId(a)).val(b)};eh.parse.setTextareaValue=function(a,b){$("#"+eh.parse.createTagId(a)).val(b)};eh.parse.setNumberInputValue=function(a,b){$("#"+eh.parse.createTagId(a)).val(b)};eh.parse.setRadioValue=function(a,b){b?$("input[type\x3d'radio'][name\x3d'"+a.busAttrCode+"'][value\x3d'"+b+"']").attr("checked",!0):$("input[type\x3d'radio'][name\x3d'"+a.busAttrCode+"']").removeAttr("checked")};eh.parse.setCheckboxValue=function(a,b){b?$("[id\x3d'"+a.busAttrCode+"']").attr("checked",!0):$("[id\x3d'"+a.busAttrCode+"']").attr("checked",!1)};eh||(eh={});eh.script||(eh.script={});var dataCache={};eh.script.getDataCache=function(a){return a in dataCache?dataCache[a]:dataCache};eh.script.setDataCache=function(a,b){dataCache[a]=b};eh.script.removeDataCache=function(a){a in dataCache&&delete dataCache[a]};eh.script.jsActuator=function(a){if(a)try{$.isFunction(a)?a():eval(a+"")}catch(b){}};eh.script.clearDataCache=function(){dataCache={}};eh.script.jsBatchActuator=function(a){if(a)for(var b in a)eh.script.jsActuator(a[b])};eh||(eh={});eh.style||(eh.style={});eh.style.cls="class";eh.style.style="style";eh.style.parseConfStyle=function(a){var b="",c="";if(a)for(d in a){var d=a[d];"del"!==d.opType&&(d.styleType===eh.style.cls?b+=" "+d.styleAttrValue:d.styleType===eh.style.style&&(c+=";"+d.styleAttr+":"+d.styleAttrValue))}a="";b&&""!=b&&(a='class\x3d"'+b.substring(1)+'"');c&&""!=c&&(a+=' style\x3d"'+c.substring(1)+'"');return a};eh||(eh={});eh.util||(eh.util={});eh.util.getDate=function(a){var b=new Date,c={"M+":b.getMonth()+1,"d+":b.getDate(),"h+":0==b.getHours()%12?12:b.getHours()%12,"H+":b.getHours(),"m+":b.getMinutes(),"s+":b.getSeconds(),"q+":Math.floor((b.getMonth()+3)/3),S:b.getMilliseconds()},d={0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(b.getFullYear()+"").substr(4-RegExp.$1.length)));/(E+)/.test(a)&&(a=a.replace(RegExp.$1,(1<RegExp.$1.length?2<RegExp.$1.length?"/u661f/u671f":"/u5468":"")+d[b.getDay()+""]));for(var e in c)(new RegExp("("+e+")")).test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?c[e]:("00"+c[e]).substr((""+c[e]).length)));return a};eh.util.number="";eh.util.isNumber=function(a,b){a&&b?(new RegExp(b)).test($(a).val())||$(a).val(0):(b=/^[0-9]*$/,b.test($(a).val())||$(a).val(0))};eh.util.getUrlParam=function(a){a=new RegExp("(^|\x26)"+a+"\x3d([^\x26]*)(\x26|$)");a=window.location.search.substr(1).match(a);return null!=a?unescape(a[2]):null};eh.util.getDesignPageTree=function(){return $.fn.zTree.getZTreeObj("designPage")};eh.util.getDesignStyleTree=function(){return $.fn.zTree.getZTreeObj("designStyle")};eh.util.getAngular$scope=function(a){return angular.element("#"+a).scope()};eh.util.angular$apply=function(a){a&&a.$apply()};eh.util.getObjTree=function(){return $.fn.zTree.getZTreeObj("objComp")};