if(!eh){var eh={}}if(!eh.data){eh.data={}}eh.data.url="meta/dynamicPageCtrl";eh.data.call=function(e,f,b){var c="";var d=angular.injector(["commonApp","ng"]);d.invoke(["commonService",function(g){switch(e){case"win":c=eh.data.url+"/getDynamicWinByCode";break;case"tpl":c="";break;default:c=eh.data.url+"/"+f.method;break}g.call(c,f,function(h){if($.isFunction(b)){b(eh.data._dataformat(h))}},null)}])};eh.data.callMethod=function(e,d,b){var c=angular.injector(["commonApp","ng"]);c.invoke(["commonService",function(f){f.call(eh.data.url+"/"+e,d,function(g){if($.isFunction(b)){b(eh.data._dataformat(g))}},null)}])};eh.data.callService=function(c,e,b){var d=angular.injector(["commonApp","ng"]);d.invoke(["commonService",function(f){f.call(c,e,function(g){if($.isFunction(b)){b(eh.data._dataformat(g))}},null)}])};eh.data.getPageByWinCode=function(c,b){eh.data.call("win",JSON.stringify({winCode:c}),b)};eh.data._dataformat=function(b){return b};$.fn.extend({win:function(b){var c=$(this);if(b){eh.data.call("win",JSON.stringify({winCode:b.param}),function(d){try{c.html(eh.parse.createHtml(d));eh.script.jsBatchActuator(eh.script.getDataCache(""));if($.isFunction(b.success)){b.success(d)}}catch(f){if($.isFunction(b.error)){b.error(f)}}})}},winByEvent:function(b){var c=$(this);eh.data.callMethod("getDynamicWinByEvents",JSON.stringify({busSpec:b.param.busSpec,busService:b.param.busService,busRegion:b.param.busRegion}),function(d){try{c.html(eh.parse.createHtml(d));eh.script.jsBatchActuator(eh.script.getDataCache(""));if($.isFunction(b.success)){b.success(d)}}catch(f){if($.isFunction(b.error)){b.error(f)}}})},initSelect:function(b){var c=$(this);eh.data.callService(b.url,b.param,function(e){if(e&&e.object){c.empty();var d=e.object;if(d&&d.length>0){c.append("<option id='option_0_0' value=''>请选择</option>");$.each(d,function(g,f){c.append("<option id='option_"+f.id+"' value='"+f.value+"'>"+f.name+"</option>")})}if($.isFunction(b.success)){b.success(e)}}})}});if(!eh){var eh={}}if(!eh.parse){eh.parse={}}eh.parse.compType={};eh.parse.compType["1"]="input";eh.parse.compType["2"]="select";eh.parse.compType["5"]="dateinput";eh.parse.compType["8"]="radio";eh.parse.compType["9"]="checkbox";eh.parse.compType["10"]="textarea";eh.parse.compType["14"]="numberinput";eh.parse.compValue={};eh.parse.createHtml=function(b){return eh.parse.parse2HTML(eh.parse.getRootComp(b))};eh.parse.getRootComp=function(b){if(b&&b.object){return b.object.componentDto}};eh.parse.parse2HTML=function(g){var e="";if(g){if(g.groupCode&&g.componentType!="201"){if(g.tpl&&typeof(g.tpl)!="undefined"){var d=g.tpl.componentDto;if(d&&d.children&&d.children.length>0){var c={};$.extend(c,d);var f={};$.extend(f,g);delete f.tpl;delete f.groupCode;e+=eh.parse.createCompHtml(eh.parse.tplHtml(c,f))}else{if(d.componentType==="200"){eh.parse.tplStyle(d,g)}e+=eh.parse.createCompHtml(g)}}}else{if(g.groupCode&&g.componentType==="201"){if(g.part&&typeof(g.part)!="undefined"){var b=g.part.componentDto;e+=eh.parse.createCompHtml(b)}}else{e+=eh.parse.createCompHtml(g)}}}return e};eh.parse.tplHtml=function(b,c){if(c.busAttrName){b.componentName=c.busAttrName}else{b.componentName=c.componentName}if(c.busAttrCode){b.busAttrCode=c.busAttrCode}else{b.busAttrCode=c.componentCode}$.each(b.children,function(e,d){if(d.componentType==="200"){$.extend(true,d,c)}else{eh.parse.tplHtml(d,c)}if(c.busAttrCode){d.busAttrCode=c.busAttrCode}else{d.busAttrCode=c.componentCode}if(c.busAttrName){d.componentName=c.busAttrName}else{d.componentName=c.componentName}});return b};eh.parse.tplStyle=function(b,c){$.each(b.dynamicStyleDtos,function(e,d){d.opType="tpl";if(c&&c.dynamicStyleDtos&&c.dynamicStyleDtos.length>0){$.each(c.dynamicStyleDtos,function(g,f){if(d.relaStyleId!=f.relaStyleId){c.dynamicStyleDtos.push(d)}})}else{c.dynamicStyleDtos.push(d)}})};eh.parse.createCompHtml=function(d){var c="";var b=parseInt(d.componentType);switch(b){case 0:c=eh.parse.createForm(d);break;case 1:c=eh.parse.createInput(d);break;case 2:c=eh.parse.createSelect(d);break;case 3:c=eh.parse.createDiv(d);break;case 4:c=eh.parse.createLabel(d);break;case 5:c=eh.parse.createDateInput(d);break;case 6:c=eh.parse.createPassword(d);break;case 7:c=eh.parse.createSpan(d);break;case 8:c=eh.parse.createCheckbox(d);break;case 9:c=eh.parse.createRadiobox(d);break;case 10:c=eh.parse.createTextarea(d);break;case 11:c=eh.parse.createButton(d);break;case 12:c=eh.parse.createUl(d);break;case 13:c=eh.parse.createLi(d);break;case 14:c=eh.parse.createNumberInput(d);break;default:break}return c};eh.parse.createStyle=function(d){var b=eh.style.parseConfStyle(d.dynamicStyleDtos);return typeof(b)=="undefined"?"":b};eh.parse.createForm=function(e){var b="<form "+eh.parse.createStyle(e)+" >";var d=e.children;if(d!=null&&d.length>0){for(t in d){b+=eh.parse.parse2HTML(d[t])}}b+="</form>";return b};eh.parse.createDiv=function(e){var b="<div "+eh.parse.createStyle(e)+" >";var d=e.children;if(d!=null&&d.length>0){for(t in d){b+=eh.parse.parse2HTML(d[t])}}b+="</div>";return b};eh.parse.createTagId=function(b){return b.busAttrCode};eh.parse.createInput=function(e){var b="";var d=typeof(e.componentTip)==="undefined"?"":e.componentTip;b+="<input "+eh.parse.createStyle(e)+' id="'+eh.parse.createTagId(e)+'" type="text"  placeholder="'+d+'"/>';return b};eh.parse.createLabel=function(e){var b="";b+="<label "+eh.parse.createStyle(e)+' for="'+eh.parse.createTagId(e)+'">';var d=e.children;if(d!=null&&d.length>0){b+=""+e.componentName+":</label>";var d=e.children;if(d!=null&&d.length>0){for(t in d){b+=eh.parse.parse2HTML(d[t])}}}else{b+=e.componentName+"</label>"}return b};eh.parse.createPassword=function(d){var b="";b+="<input "+eh.parse.createStyle(d)+' id="'+eh.parse.createTagId(d)+'" type="password" "/>';return b};eh.parse.createSpan=function(d){var b="";b+="<span "+eh.parse.createStyle(d)+' id="'+eh.parse.createTagId(d)+'" >'+d.componentName+"</span>";return b};eh.parse.createCheckbox=function(d){var b="";b+='<input type="checkbox" '+eh.parse.createStyle(d)+' id="'+eh.parse.createTagId(d)+'" value="1">  '+d.componentName+"";return b};eh.parse.createRadiobox=function(e){var d=e.attrValueDtos;if(d&&d.length>0){for(a in d){var b=d[a];html+='<input name="'+e.busAttrCode+'" '+eh.parse.createStyle(e)+' id="'+eh.parse.createTagId(e)+'" value="'+b.attrValue+'">'+b.attrValueName+"</input>"}}return html};eh.parse.createTextarea=function(d){var b="";b+="<textarea "+eh.parse.createStyle(d)+' id="'+eh.parse.createTagId(d)+'" rows="'+d.componentRows+'" clos="'+d.componentClos+'" placeholder="'+d.componentName+'"/>';return b};eh.parse.createSelect=function(f){var e="";e+=" <select "+eh.parse.createStyle(f)+' id="'+eh.parse.createTagId(f)+'">';var d=f.attrValueDtos;if(d&&d.length>0){e+='<option id="option_0_0" value="" selected="selected">请选择</option>';for(a in d){var b=d[a];e+='<option id="option_'+eh.parse.createTagId(f)+"_"+b.attrValueId+'" value="'+b.attrValue+'">'+b.attrValueName+"</option>"}}e+="</select>";return e};eh.parse.createDateInput=function(d){var b="<input "+eh.parse.createStyle(d)+' id="'+eh.parse.createTagId(d)+'" placeholder="'+d.componentName+'" type="text" />';eh.script.setDataCache(eh.parse.createTagId(d),function(){$("#"+eh.parse.createTagId(d)).datetimepicker({format:""+d.componentExp+"",dateIcon:"glyphicon glyphicon-calendar"})});return b};eh.parse.createButton=function(d){var b='<button type="button" '+eh.parse.createStyle(d)+' id="'+eh.parse.createTagId(d)+'">'+d.componentName+"</button>";return b};eh.parse.createUl=function(e){var b="<ul "+eh.parse.createStyle(e)+' id="'+eh.parse.createTagId(e)+'">';var d=e.children;if(d!=null&&d.length>0){for(t in d){b+=eh.parse.parse2HTML(d[t])}}b+="</ul>";return b};eh.parse.createLi=function(d){var b="<li "+eh.parse.createStyle(d)+' id="'+eh.parse.createTagId(d)+'">'+d.componentName+"</li>";return b};eh.parse.createNumberInput=function(e){var b="";var d=typeof(e.componentTip)==="undefined"?"":e.componentTip;b+="<input "+eh.parse.createStyle(e)+' id="'+eh.parse.createTagId(e)+'" type="text" value="0"  placeholder="'+d+'" onblur="eh.util.isNumber(this,'+e.componentExp+')"/>';return b};eh.parse.getHtmlValue=function(b){var c=eh.parse.getRootComp(b);return eh.parse.recursionGetComp(c.children)};eh.parse.recursionGetComp=function(b){for(var c in b){var e=b[c];if(e.componentType in eh.parse.compType){eh.parse.compValue[e.busAttrCode]=eh.parse.getCompValue(e)}var f=e.children;if(f!=null&&f.length>0){eh.parse.recursionGetComp(f)}}return eh.parse.compValue};eh.parse.getCompValue=function(d){var c=null;var b=parseInt(d.componentType);switch(b){case 1:c=eh.parse.getInputValue(d);break;case 2:c=eh.parse.getSelectValue(d);break;case 5:c=eh.parse.getDateInputValue(d);break;case 8:c=eh.parse.getRadioValue(d);break;case 9:c=eh.parse.getCheckboxValue(d);break;case 10:c=eh.parse.getTextareaValue(d);break;case 14:c=eh.parse.getNumberInputValue(d);break;default:break}return c};eh.parse.getInputValue=function(b){return $("#"+eh.parse.createTagId(b)).val()};eh.parse.getSelectValue=function(b){return $("#"+eh.parse.createTagId(b)).val()};eh.parse.getDateInputValue=function(b){return $("#"+eh.parse.createTagId(b)).val()};eh.parse.getRadioValue=function(b){return $('input:radio[name="'+b.busAttrCode+'"]:checked').val()};eh.parse.getCheckboxValue=function(b){$("input[name='"+b.busAttrCode+"']:checkbox").each(function(){if($(this).attr("checked")){return true}});return false};eh.parse.getTextareaValue=function(b){return $("#"+eh.parse.createTagId(b)).val()};eh.parse.getNumberInputValue=function(b){return $("#"+eh.parse.createTagId(b)).val()};eh.parse.setHtmlValue=function(b,d){var c=eh.parse.getRootComp(b);return eh.parse.recursionSetComp(c.children,d)};eh.parse.clearHtmlValue=function(b){var c=eh.parse.getRootComp(b);return eh.parse.recursionClearComp(c.children)};eh.parse.recursionClearComp=function(b){for(i in b){var c=b[i];if(c.componentType in eh.parse.compType){eh.parse.setCompValue(c,"")}var e=c.children;if(e!=null&&e.length>0){eh.parse.recursionClearComp(e)}}};eh.parse.recursionSetComp=function(b,f){for(i in b){var c=b[i];if(c.componentType in eh.parse.compType){if(f){for(key in f){if(c.busAttrCode===key){eh.parse.setCompValue(c,typeof(f[key])==="undefiend"?"":f[key])}}}}var e=c.children;if(e!=null&&e.length>0){eh.parse.recursionSetComp(e,f)}}};eh.parse.setCompValue=function(d,c){var b=parseInt(d.componentType);switch(b){case 1:eh.parse.setInputValue(d,c);break;case 2:eh.parse.setSelectValue(d,c);break;case 5:eh.parse.setDateInputValue(d,c);break;case 8:c=eh.parse.setRadioValue(d);break;case 9:c=eh.parse.setCheckboxValue(d);break;case 10:c=eh.parse.setTextareaValue(d);break;case 14:c=eh.parse.setNumberInputValue(d);break;default:break}};eh.parse.setInputValue=function(d,b){$("#"+eh.parse.createTagId(d)).val(b)};eh.parse.setSelectValue=function(d,b){$("#"+eh.parse.createTagId(d)).val(b)};eh.parse.setDateInputValue=function(d,b){$("#"+eh.parse.createTagId(d)).val(b)};eh.parse.setTextareaValue=function(d,b){$("#"+eh.parse.createTagId(d)).val(b)};eh.parse.setNumberInputValue=function(d,b){$("#"+eh.parse.createTagId(d)).val(b)};eh.parse.setRadioValue=function(d,b){if(b){$("input[type='radio'][name='"+d.busAttrCode+"'][value='"+b+"']").attr("checked",true)}else{$("input[type='radio'][name='"+d.busAttrCode+"']").removeAttr("checked")}};eh.parse.setCheckboxValue=function(d,b){if(b){$("[name='"+d.busAttrCode+"']").attr("checked",true)}else{$("[name='"+d.busAttrCode+"']").attr("checked",false)}};if(!eh){var eh={}}if(!eh.script){eh.script={}}var dataCache={};eh.script.getDataCache=function(b){if(b in dataCache){return dataCache[b]}else{return dataCache}};eh.script.setDataCache=function(b,c){dataCache[b]=c};eh.script.removeDataCache=function(b){if(b in dataCache){delete dataCache[b]}};eh.script.jsActuator=function(js){if(js){try{if($.isFunction(js)){js()}else{eval(js+"")}}catch(e){}}};eh.script.clearDataCache=function(){dataCache={}};eh.script.jsBatchActuator=function(b){if(b){for(var c in b){eh.script.jsActuator(b[c])}}};if(!eh){var eh={}}if(!eh.style){eh.style={}}eh.style.cls="class";eh.style.style="style";eh.style.parseConfStyle=function(f){var b="";var c="";if(f){for(e in f){var e=f[e];if(e.opType==="del"){continue}if(e.styleType===eh.style.cls){b+=" "+e.styleAttrValue}else{if(e.styleType===eh.style.style){c+=";"+e.styleAttr+":"+e.styleAttrValue}}}}var d="";if(b&&b!=""){d='class="'+b.substring(1)+'"'}if(c&&c!=""){d+=' style="'+c.substring(1)+'"'}return d};if(!eh){var eh={}}if(!eh.util){eh.util={}}eh.util.getDate=function(b){var d=new Date();var f={"M+":d.getMonth()+1,"d+":d.getDate(),"h+":d.getHours()%12==0?12:d.getHours()%12,"H+":d.getHours(),"m+":d.getMinutes(),"s+":d.getSeconds(),"q+":Math.floor((d.getMonth()+3)/3),S:d.getMilliseconds()};var e={"0":"/u65e5","1":"/u4e00","2":"/u4e8c","3":"/u4e09","4":"/u56db","5":"/u4e94","6":"/u516d"};if(/(y+)/.test(b)){b=b.replace(RegExp.$1,(d.getFullYear()+"").substr(4-RegExp.$1.length))}if(/(E+)/.test(b)){b=b.replace(RegExp.$1,((RegExp.$1.length>1)?(RegExp.$1.length>2?"/u661f/u671f":"/u5468"):"")+e[d.getDay()+""])}for(var c in f){if(new RegExp("("+c+")").test(b)){b=b.replace(RegExp.$1,(RegExp.$1.length==1)?(f[c]):(("00"+f[c]).substr((""+f[c]).length)))}}return b};eh.util.number="";eh.util.isNumber=function(d,b){if(d&&b){if(!b.test($(d).val())){$(d).val(0)}}};eh.util.getUrlParam=function(b){var c=new RegExp("(^|&)"+b+"=([^&]*)(&|$)");var d=window.location.search.substr(1).match(c);if(d!=null){return unescape(d[2])}return null};